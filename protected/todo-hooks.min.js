"use strict";!function(t){$("#create-task").submit(function(e){e.preventDefault(),$.ajax("/todo/create",{method:"POST",beforeSend:e=>e.setRequestHeader("Authorization",`Bearer ${t}`),data:$(this).serialize()}).then(t=>{const e=`<li data-id="${t}"><button class="delete-task">X</button><div contenteditable>${$("#task").val()}</div></li>`;$(e).appendTo($("#todos")),$("#task").val("")}).catch(()=>console.log("create failed"))}),$("#todos").on("blur","div[contenteditable]",function(e){$.ajax({method:"PATCH",beforeSend:e=>e.setRequestHeader("Authorization",`Bearer ${t}`),url:`/todo/edit/${$(this).parent().attr("data-id")}`,data:{task:$(this).text()}})}),$("#todos").on("click",".delete-task",function(e){$.ajax({method:"DELETE",beforeSend:e=>e.setRequestHeader("Authorization",`Bearer ${t}`),url:`/todo/delete/${$(this).parent().attr("data-id")}`}).then(()=>$(this).parent().remove()).catch(()=>console.log("delete failed"))})}(window._token);
